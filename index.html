<!DOCTYPE html>
<html>
  <head>
    <title>Drumroll...</title>

    <link rel="stylesheet" href="main.css">
    <script type="text/javascript">

    // TODO: non-hardcoded recipients list
      var recipients = [
        "Alice",
        "Bob",
        "Craig",
        "Dan",
        "Eve",
      ]

      var magnitude = [
        "Most ",
        "Least ",
        "Best ",
        "Worst ",
      ]

    // TODO: Read the categories from award_names.txt instead of hardcoding
      var categories = [
      "belt-shaped drilling pipe",
      "ducal blackfoot daisy",
      "acervate Parry's pinyon",
      "unbrainwashed stamp collection",
      "sublimate undercharge",
      "shifting primary censorship",
      "subterranean raindrop",
      "deep conferrer",
      "pale skim",
      "bulbar saddleback",
      "unstoppered firewall",
      "winglike Vela",
      "ascendant kauri",
      "frantic genus Oryx",
      "windup schnapps",
      "cross-banded petitio principii",
      "ill-bred brimstone",
      "minor cream pitcher",
      "thenal fetter",
      "disputed warlord",
      "regulation fanlight",
      "implemental visual space",
      "void acidic hydrogen",
      "spinal pacemaker",
      "pent juvenile body",
      "color-blind rat-a-tat-tat",
      "deep-sea loft",
      "monumental tributyrin",
      "jerkwater Lisu",
      "bloodguilty Florentine iris",
      "disparate sloop",
      "sheathed acidophilus milk",
      "protrusive servant",
      "noiseless dialogue",
      "mated misuse",
      "lightproof Little Office",
      "caring sequencer",
      "consequential price",
      "nonabsorbent West Berliner",
      "fastidious string section",
      "wet sacrilegiousness",
      "biogenetic housing estate",
      "asterismal sunfish",
      "blown-up agape",
      "detachable fishing season",
      "apoplectic Booth",
      "embattled storybook",
      "unexpired Lepus",
      "homeless marital relationship",
      "unrequested common sunflower",
      "micro demagnetization",
      "fizzing II Chronicles",
      "unseeded sergeant at arms",
      "greater Fox",
      "exigent bridoon",
      "orchestrated tree house",
      "live object recognition",
      "fusible Areopagus",
      "open Colchicum",
      "defined quart",
      "woven Faroe Islands",
      "catechistic virilism",
      "pastel conservator-ward relation",
      "annual Neva",
      "orthopedic Leptodactylidae",
      "plantar thalamostriate vein",
      "alcohol-soluble Lashkar-e-Jhangvi",
      "ribbed mortgagee",
      "solid self-registering thermometer",
      "rustproof calliopsis",
      "matched Euphrosyne",
      "shipboard kniphofia",
      "calcic reversion",
      "beady Kamchatka Peninsula",
      "mundane immateriality",
      "Roman coyote",
      "aromatic coach",
      "fourteen Ney",
      "indiscrete past",
      "impatient Greenback Party",
      "babelike spicebush",
      "unplowed Japanese beetle",
      "superficial fishbone",
      "porose flagon",
      "actinomycetal inclination",
      "isotonic Willard",
      "passant metallic",
      "unsound pen-and-ink",
      "familiar World Cup",
      "Britannic Naja",
      "armored perennial ryegrass",
      "ectomorphic doeskin",
      "deceptive wave number",
      "amenable deal",
      "long-distance fluorochrome",
      "well-groomed obviousness",
      "exaugural frangipane",
      "low-cut Chateaubriand",
      "downward-arching Anguilla",
      "passionless deadbeat dad",
      "even continental shelf",
      "appreciable patrimony",
      "ungracious Helenium",
      "cybernetic mumps",
      "well-knit folly",
      "deadened downfall",
      "unvulcanized armchair",
      "superfine insufflation",
      "literary American Federation of Labor",
      "capitalistic suspension",
      "thematic bosk",
      "pristine envelope",
      "smoke-filled Edward the Confessor",
      "Mycenaean angiology",
      "ninety chariot",
      "cross-eyed stringer",
      "beaklike scintilla",
      "Mozartian Livermore",
      "discreditable personal expense",
      "despoiled time scale",
      "s-shaped nihil",
      "authorized spindle tree",
      "moneyless safety net",
      "bronze Reiter's syndrome",
      "syncategorematic cabal",
      "mesolithic Hercules",
      "tinpot pyrophyllite",
      "unloaded liftoff",
      "leery epicenter",
      "unstructured freeloader",
      "nebular secretariat",
      "forced infection",
      "prescription steel production",
      "trophoblastic parley",
      "free Tulu",
      "humanist systole",
      "unlovable bing cherry",
      "shut impaction",
      "experimental old country",
      "Chadian protriptyline",
      "inefficacious siding",
      "palmate genus Arum",
      "autofluorescent exploration",
      "eccrine hotfoot",
      "shrewish connivance",
      "machine readable bray",
      "at the ready grater",
      "long-winded karate",
      "indomitable charger",
      "curious serrated wrack",
      "exploratory floor",
      "vicarious Cypraeidae",
      "twenty-first ground beetle",
      "must large",
      "anti-American Lota",
      "proto pin-tailed sandgrouse",
      "wry Cantabrian Mountains",
      "younger lector",
      "corymbose rag paper",
      "licentious nasal septum",
      "infinite glans penis",
      "syrupy ocean sunfish",
      "Latin-American archine",
      "big mole cricket",
      "cozy inside track",
      "aqueous salmonellosis",
      "peripheral heat-seeking missile",
      "bivariate lower deck",
      "finished beryllium bronze",
      "unifacial Wilson's warbler",
      "acidimetric Wernicke's area",
      "least hard rubber",
      "heavenly harvest",
      "homogenized picador",
      "distant little brother",
      "plane-polarized Canadian",
      "echoing magpie",
      "gory singular",
      "humane ootid",
      "migratory Acroclinium",
      "gradational senna",
      "auxetic fancy goods",
      "vitreous Welsh onion",
      "upcurved rhagades",
      "longstanding pomegranate",
      "natural trio",
      "social verbalization",
      "unmanly genetic map",
      "disciplined Gastrophryne",
      "personal Dean",
      "silty hairsplitting",
      "impalpable mendacity",
      "shared Astor",
      "clinical exceedance",
      "air-breathing creatine",
      "clunky forefather",
      "borderline salaam",
      "scholastic bar line",
      "Sudanese Ondatra",
      "baric phase",
      ]

      const intervals = new Array(50)
      intervals.fill(50, 0, 20)
      intervals.fill(100, 20, 30)
      intervals.fill(200, 30, 38)
      intervals.fill(400, 38, 45)
      intervals.fill(800, 45, 49)
      intervals.fill(1600, 49, 50)


      function randomElementFrom(arr){
        return arr[Math.floor(Math.random() * arr.length)]
      }

      function shuffleArray(array) {
          for (var i = array.length - 1; i > 0; i--) {
              var j = Math.floor(Math.random() * (i + 1));
              var temp = array[i];
              array[i] = array[j];
              array[j] = temp;
          }
      }

      function print(str,id){
        document.getElementById(id).innerHTML = str
      }

      function wait (interval) {
        return new Promise(rslv => setTimeout(rslv, interval));
      }

      function waitThenPrint(intervals, recipient){
        if (intervals.length === 0) {
          return wait(1600)
            .then(() => print("🍔 "+recipient+" 🍔", "recipient")) 
        } else {
          return wait(intervals[0])
            .then(() => print(randomElementFrom(magnitude)+randomElementFrom(categories), "category"))
            .then(() => waitThenPrint(intervals.slice(1), recipient))
        }
      }

      function drawAward(){
        if (recipients.length === 0) {
            document.body.style.color = "pink"
            document.body.innerHTML = "🍔🍔🍔🍔S🍔🍔O🍔🍔🍔🍔🍔🍔🍔U🍔T🍔🍔🍔H🍔🍔🍔🍔b🍔🍔🍔🍔🍔🍔y🍔🍔🍔🍔🍔🍔S🍔🍔🍔🍔🍔🍔🍔🍔🍔🍔O🍔U🍔🍔T🍔🍔🍔🍔🍔H🍔🍔🍔🍔2019🍔🍔🍔🍔🍔🍔🍔🍔"
            return
        }
        let recipient = recipients.pop()
        print("", "recipient")
        waitThenPrint(intervals, recipient)       
      }

      shuffleArray(recipients)
      window.onload = function() {
        document.body.onclick = drawAward
      }
      
      
    </script>
  </head>

  <body>
    <div>
      🍔🍔🍔🍔🍔🍔🍔🍔🍔 <br>
      The award for
    </div>
    <div id="category"></div>
    <div>
      Goes to....
    </div>
    <div id="recipient"></div>
  </body>

</html>
